var L=Object.defineProperty;var N=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var w=(r,o,c)=>o in r?L(r,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[o]=c,x=(r,o)=>{for(var c in o||(o={}))k.call(o,c)&&w(r,c,o[c]);if(N)for(var c of N(o))D.call(o,c)&&w(r,c,o[c]);return r};import{r as i,f as E,j as g,a as l,S as R,D as j,R as M}from"./vendor.dca84595.js";const O=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const f of t.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function c(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(e){if(e.ep)return;e.ep=!0;const t=c(e);fetch(e.href,t)}};O();const B=r=>new Promise((o,c)=>{if(r==null?void 0:r.files){const u=r.files[0],e=new FileReader;e.addEventListener("load",function(){e.result&&o(e.result)}),e.readAsDataURL(u)}else c(Error())}),b={width:200,height:200},P=()=>{const r=i.exports.useRef(null),[o,c]=i.exports.useState(null),u=i.exports.useRef(null),e=i.exports.useRef(null),[t,f]=i.exports.useState(null),[m,v]=i.exports.useState(1),[F,y]=i.exports.useState(1);i.exports.useEffect(()=>{!u.current||(e.current=new E.fabric.Canvas(u.current,x({},b)))},[u]),i.exports.useEffect(()=>{if(!o)return;const n=document.createElement("img");n.src=o,n.addEventListener("load",()=>{var h;const s=new E.fabric.Image(n);(h=e.current)==null||h.add(s),f(s),s.on("selected",({target:p})=>{f(p),v((p==null?void 0:p.scaleX)||1)})})},[o]),i.exports.useEffect(()=>{v(1),y(1)},[t]);const a=i.exports.useMemo(()=>{const{width:n=0,height:s=0}=x({},t);return{x:-((n*m-b.width)/2),y:-((s*m-b.height)/2),right:n*m-b.width,bottom:s*m-b.height}},[t,m]),d=n=>{var s;console.log(t,n),t==null||t.set(n),(s=e.current)==null||s.requestRenderAll()},A=n=>{var s;t==null||t.scale(n),v(n),(s=e.current)==null||s.requestRenderAll()},S=n=>{var s;t==null||t.set({opacity:n}),y(n),(s=e.current)==null||s.requestRenderAll()};return g("div",{className:"w-screen h-screen py-30 flex flex-col justify-around",children:[l("input",{type:"file",ref:r,className:"hidden",accept:"image/png, image/jpeg",onChange:async()=>{c(await B(r.current))}}),g("div",{className:"upload-preview",children:[l("canvas",{ref:u}),l("div",{className:"btn absolute -left-20 -top-20",onClick:()=>{d({left:0,top:0})},children:"L-T"}),l("div",{className:"btn absolute x-center -top-20",onClick:()=>{d({left:a.x,top:0})},children:"M-T"}),l("div",{className:"btn absolute -right-20 -top-20",onClick:()=>{d({left:-a.right,top:0})},children:"R-T"}),l("div",{className:"btn absolute -right-20 y-center",onClick:()=>{d({left:-a.right,top:a.y})},children:"R-M"}),l("div",{className:"btn absolute -right-20 -bottom-20",onClick:()=>{d({left:-a.right,top:-a.bottom})},children:"R-B"}),l("div",{className:"btn absolute x-center -bottom-20",onClick:()=>{d({left:a.x,top:-a.bottom})},children:"M-B"}),l("div",{className:"btn absolute -left-20 -bottom-20",onClick:()=>{d({left:0,top:-a.bottom})},children:"L-B"}),l("div",{className:"btn absolute -left-20 y-center",onClick:()=>{d({left:0,top:a.y})},children:"L-M"})]}),g("div",{className:"mt-20",children:[l("span",{className:"ml-12px",children:"\u5C3A\u5BF8\uFF1A"}),l(R,{min:.01,max:2,defaultValue:1,value:m,step:.01,onChange:n=>{A(n)}}),l("span",{className:"ml-12px",children:"\u900F\u660E\u5EA6\uFF1A"}),l(R,{min:0,max:1,defaultValue:1,step:.1,value:F,onChange:n=>{S(n)}})]}),g("div",{className:"flex justify-around items-center",children:[l("div",{className:"btn",onClick:()=>{var n;(n=r.current)==null||n.click()},children:"\u4E0A\u4F20\u56FE\u7247"}),l("div",{className:"btn",onClick:()=>{var C;const n=window.devicePixelRatio||1,s=(C=e.current)==null?void 0:C.getElement(),h=s==null?void 0:s.getContext("2d");h==null||h.scale(n,n);const p=s==null?void 0:s.toDataURL("image/jpeg",1);j.alert({image:p,title:"\u957F\u6309\u4E0B\u8F7D\u56FE\u7247"})},children:"\u751F\u6210"}),l("div",{className:"btn",children:"\u91CD\u7F6E"})]})]})};M.render(l(P,{}),document.getElementById("root"));
