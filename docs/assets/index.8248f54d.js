var k=Object.defineProperty;var N=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var R=(l,r,c)=>r in l?k(l,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[r]=c,y=(l,r)=>{for(var c in r||(r={}))L.call(r,c)&&R(l,c,r[c]);if(N)for(var c of N(r))j.call(r,c)&&R(l,c,r[c]);return l};import{r as i,f as w,j as v,a as o,S as E,D,R as O}from"./vendor.9fc5fca2.js";const M=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&u(m)}).observe(document,{childList:!0,subtree:!0});function c(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(e){if(e.ep)return;e.ep=!0;const s=c(e);fetch(e.href,s)}};M();const B=l=>new Promise((r,c)=>{if(l==null?void 0:l.files){const u=l.files[0],e=new FileReader;e.addEventListener("load",function(){e.result&&r(e.result)}),e.readAsDataURL(u)}else c(Error())}),b={width:200,height:200},q=()=>{const l=i.exports.useRef(null),[r,c]=i.exports.useState(null),u=i.exports.useRef(null),e=i.exports.useRef(null),[s,m]=i.exports.useState(null),[h,g]=i.exports.useState(1),[F,x]=i.exports.useState(1);i.exports.useEffect(()=>{!u.current||(e.current=new w.fabric.Canvas(u.current,y({},b)))},[u]),i.exports.useEffect(()=>{if(!r)return;const t=document.createElement("img");t.src=r,t.addEventListener("load",()=>{var d;const n=new w.fabric.Image(t);(d=e.current)==null||d.add(n),m(n),n.on("selected",({target:p})=>{m(p),g((p==null?void 0:p.scaleX)||1)})})},[r]),i.exports.useEffect(()=>{g(1),x(1)},[s]);const a=i.exports.useMemo(()=>{const{width:t=0,height:n=0}=y({},s);return{x:-((t*h-b.width)/2),y:-((n*h-b.height)/2),right:t*h-b.width,bottom:n*h-b.height}},[s,h]),f=t=>{var n;s==null||s.set(t),(n=e.current)==null||n.requestRenderAll()},A=t=>{var n;s==null||s.scale(t),g(t),(n=e.current)==null||n.requestRenderAll()},S=t=>{var n;s==null||s.set({opacity:t}),x(t),(n=e.current)==null||n.requestRenderAll()};return v("div",{className:"w-screen h-screen py-30 flex flex-col justify-around",children:[o("input",{type:"file",ref:l,className:"hidden",accept:"image/png, image/jpeg",onChange:async()=>{c(await B(l.current))}}),v("div",{className:"upload-preview",children:[o("canvas",{ref:u}),o("div",{className:"btn absolute -left-20 -top-20",onClick:()=>{f({left:0,top:0})},children:"L-T"}),o("div",{className:"btn absolute x-center -top-20",onClick:()=>{f({left:a.x,top:0})},children:"M-T"}),o("div",{className:"btn absolute -right-20 -top-20",onClick:()=>{f({left:-a.right,top:0})},children:"R-T"}),o("div",{className:"btn absolute -right-20 y-center",onClick:()=>{f({left:-a.right,top:a.y})},children:"R-M"}),o("div",{className:"btn absolute -right-20 -bottom-20",onClick:()=>{f({left:-a.right,top:-a.bottom})},children:"R-B"}),o("div",{className:"btn absolute x-center -bottom-20",onClick:()=>{f({left:a.x,top:-a.bottom})},children:"M-B"}),o("div",{className:"btn absolute -left-20 -bottom-20",onClick:()=>{f({left:0,top:-a.bottom})},children:"L-B"}),o("div",{className:"btn absolute -left-20 y-center",onClick:()=>{f({left:0,top:a.y})},children:"L-M"})]}),v("div",{className:"mt-20",children:[o("span",{className:"ml-12px",children:"\u5C3A\u5BF8\uFF1A"}),o(E,{min:.01,max:2,defaultValue:1,value:h,step:.01,onChange:t=>{A(t)}}),o("span",{className:"ml-12px",children:"\u900F\u660E\u5EA6\uFF1A"}),o(E,{min:0,max:1,defaultValue:1,step:.1,value:F,onChange:t=>{S(t)}})]}),v("div",{className:"flex justify-around items-center",children:[o("div",{className:"btn",onClick:()=>{var t;(t=l.current)==null||t.click()},children:"\u4E0A\u4F20\u56FE\u7247"}),o("div",{className:"btn",onClick:()=>{var C;const t=window.devicePixelRatio||1,n=(C=e.current)==null?void 0:C.getElement(),d=n==null?void 0:n.getContext("2d");d==null||d.scale(t,t);const p=n==null?void 0:n.toDataURL("image/jpeg",1);D.alert({image:p,title:"\u957F\u6309\u4E0B\u8F7D\u56FE\u7247"})},children:"\u751F\u6210"}),o("div",{className:"btn",onClick:()=>{var t,n,d;(n=e.current)==null||n.remove(...(t=e.current)==null?void 0:t.getObjects()),x(1),g(1),(d=e.current)==null||d.requestRenderAll()},children:"\u91CD\u7F6E"})]})]})};O.render(o(q,{}),document.getElementById("root"));
